"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.queries = void 0;
var queries = {
  getDataServerKavo: "SELECT  \n  PT.PatientID as RUT,\n  PT.FirstName+' '+ PT.LastName as NombrePaciente, \n  IMG.ImageGUID AS ID,\n  EXT.FileName AS NombreImagen,\n  CONVERT(VARCHAR(10),EXT.LastUpdate,105) AS FechaToma,\n  PT.MediaSubDirectory AS RutaImg\n  FROM PIDB_Patient as PT \n  INNER JOIN PIDB_Study SD ON(PT.PatientGUID = SD.PatientGUID)\n  INNER JOIN PIDB_ImageSeries IMGS ON(SD.StudyGUID = IMGS.StudyGUID)\n  INNER JOIN PIDB_Image IMG ON(IMGS.SeriesGUID = IMG.SeriesGUID)\n  INNER JOIN PIDB_ExternalData EXT ON(IMG.ImageGUID = EXT.RefGUID)\n    WHERE\n    EXT.RefType = 'ImageFile' and \n    REPLACE(REPLACE( PT.PatientID, '.', ''), '-', '') = REPLACE(REPLACE(?, '.', ''), '-', '')\n    AND CONVERT(VARCHAR(10),EXT.LastUpdate,105) = ?\n    ORDER BY EXT.LastUpdate DESC  \n  ",
  getDataServerSirona: "\n  SELECT \n  PW.tPatSExtPatID AS RUT,\n  PW.tPatSFirstname+' '+PW.tPatSName AS NombrePaciente,\n  IR.tImgCulIntImgIDPk as ID,\n  SUBSTRING(IR.tImgSFile, CHARINDEX('\\', IR.tImgSFile, CHARINDEX('\\', IR.tImgSFile) + 1) + 1, LEN(IR.tImgSFile))  as NombreImagen,\n  CONVERT(VARCHAR(10),IR.tImgTs,105) as FechaToma,\n  SUBSTRING(IR.tImgSFile, 1, LEN(IR.tImgSFile) - CHARINDEX('\\', REVERSE(IR.tImgSFile))) AS RutaImg\n  FROM [PDATA_SQLEXPRESS].[dbo].[TPatientRaw] AS PW \n  INNER JOIN [PDATA_SQLEXPRESS].[dbo].[TImageRaw] AS IR ON (PW.tPatCulIntPatIDPk = IR.tImgCulIntPatIDFk)\n  WHERE REPLACE(REPLACE( PW.tPatSExtPatID, '.', ''), '-', '') = REPLACE(REPLACE(?, '.', ''), '-', '')\n  AND CONVERT(VARCHAR(10),IR.tImgTs,105) = ?\n  ORDER BY IR.tImgTs DESC;",
  getPatientDates_Kavo: "\n  SELECT\n  CONVERT(VARCHAR(10), DATEADD(DAY, DATEDIFF(DAY, 0, EXT.LastUpdate), 0), 105) AS FechaToma,\n  COUNT(*) AS NumeroDeRegistros\n  FROM PIDB_Patient as PT \n  INNER JOIN PIDB_Study SD ON PT.PatientGUID = SD.PatientGUID\n  INNER JOIN PIDB_ImageSeries IMGS ON SD.StudyGUID = IMGS.StudyGUID\n  INNER JOIN PIDB_Image IMG ON IMGS.SeriesGUID = IMG.SeriesGUID\n  INNER JOIN PIDB_ExternalData EXT ON IMG.ImageGUID = EXT.RefGUID\n  WHERE\n    EXT.RefType = 'ImageFile' \n    AND REPLACE(REPLACE(PT.PatientID, '.', ''), '-', '') = REPLACE(REPLACE(?, '.', ''), '-', '')\n    AND CAST(CONVERT(VARCHAR, EXT.LastUpdate, 112) AS DATETIME) BETWEEN ? AND ?\n  GROUP BY DATEADD(DAY, DATEDIFF(DAY, 0, EXT.LastUpdate), 0)\n  ORDER BY DATEADD(DAY, DATEDIFF(DAY, 0, EXT.LastUpdate), 0) DESC;",
  getPatientDates_Sirona: "\n  SELECT\n  CONVERT(VARCHAR(10), DATEADD(DAY, DATEDIFF(DAY, 0, IR.tImgTs), 0), 105) AS FechaToma,\n  COUNT(*) AS NumeroDeRegistros\n  FROM TPatientRaw PW \n  INNER JOIN TImageRaw IR ON (PW.tPatCulIntPatIDPk = IR.tImgCulIntPatIDFk)\n  WHERE REPLACE(REPLACE(PW.tPatSExtPatID, '.', ''), '-', '') = REPLACE(REPLACE(?, '.', ''), '-', '')\n  AND CAST(CONVERT(VARCHAR, IR.tImgTs, 112) AS DATETIME) BETWEEN ? AND ?\n  GROUP BY DATEADD(DAY, DATEDIFF(DAY, 0, IR.tImgTs), 0)\n  ORDER BY DATEADD(DAY, DATEDIFF(DAY, 0, IR.tImgTs), 0) desc;"
};
exports.queries = queries;